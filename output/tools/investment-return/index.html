<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>投資リターン計算機【無料】複利シミュレーション</title>
<meta name="description" content="初期投資額・毎月積立額・想定年利・運用期間を入力するだけで、複利運用による最終資産額を瞬時に計算。資産推移グラフや年利別比較表で投資プランを可視化できる無料ツールです。">
<meta name="keywords" content="投資リターン,複利計算,積立投資,資産運用,シミュレーション,NISA,投資信託">
<meta property="og:title" content="投資リターン計算機【無料】複利シミュレーション">
<meta property="og:description" content="初期投資額・毎月積立額・想定年利・運用期間を入力するだけで、複利運用による最終資産額を瞬時に計算。資産推移グラフや年利別比較表で投資プランを可視化。">
<meta property="og:type" content="website">
<meta property="og:locale" content="ja_JP">
<meta property="og:site_name" content="投資リターン計算機">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="投資リターン計算機【無料】複利シミュレーション">
<meta name="twitter:description" content="複利運用の最終資産額を瞬時に計算。資産推移グラフ・年利別比較表付き無料投資シミュレーター。">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--green:#2e7d32;--green-light:#43a047;--green-pale:#e8f5e9;--green-dark:#1b5e20;--navy:#1a3a5c;--navy-light:#2c5282;--navy-pale:#e3edf7;--shadow:0 2px 12px rgba(0,0,0,.08);--shadow-lg:0 4px 24px rgba(0,0,0,.12);--radius:12px;--text:#333;--text-light:#666;--border:#e0e0e0}
html{font-size:16px;scroll-behavior:smooth}
body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Hiragino Kaku Gothic ProN","Noto Sans JP",sans-serif;background:#f8faf8;color:var(--text);line-height:1.7;min-height:100vh}
a{color:var(--green);text-decoration:none}

.header{background:linear-gradient(135deg,var(--navy) 0%,var(--green-dark) 50%,var(--green) 100%);color:#fff;text-align:center;padding:2.2rem 1rem 2rem}
.header h1{font-size:1.6rem;font-weight:700;margin-bottom:.4rem;letter-spacing:.02em}
.header p{font-size:.9rem;opacity:.9}

.container{max-width:960px;margin:0 auto;padding:0 1rem 2.5rem}

.card{background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);padding:1.5rem;margin-top:1.5rem}
.card-title{font-size:1.1rem;font-weight:700;color:var(--navy);margin-bottom:1.2rem;padding-bottom:.6rem;border-bottom:2px solid var(--green-pale);display:flex;align-items:center;gap:.5rem}
.card-title::before{content:"";display:inline-block;width:4px;height:1.1rem;background:var(--green);border-radius:2px}

.input-group{margin-bottom:1.4rem}
.input-group:last-child{margin-bottom:0}
.input-label{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:.5rem;font-weight:600;font-size:.95rem}
.input-label .unit{font-weight:400;color:var(--text-light);font-size:.85rem}
.slider-row{display:flex;align-items:center;gap:.75rem}
.slider-row input[type=range]{flex:1;-webkit-appearance:none;appearance:none;height:6px;border-radius:3px;background:var(--border);outline:none;cursor:pointer}
.slider-row input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:22px;height:22px;border-radius:50%;background:var(--green);cursor:pointer;border:3px solid #fff;box-shadow:0 1px 4px rgba(0,0,0,.2)}
.slider-row input[type=range]::-moz-range-thumb{width:22px;height:22px;border-radius:50%;background:var(--green);cursor:pointer;border:3px solid #fff;box-shadow:0 1px 4px rgba(0,0,0,.2)}
.slider-row .num-input{width:110px;padding:.45rem .5rem;border:1.5px solid var(--border);border-radius:8px;font-size:1rem;text-align:right;font-family:inherit;transition:border-color .2s}
.slider-row .num-input:focus{outline:none;border-color:var(--green)}

.results-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:.75rem}
.result-box{background:var(--green-pale);border-radius:10px;padding:1rem;text-align:center}
.result-box.primary{background:linear-gradient(135deg,var(--navy),var(--green-dark));color:#fff;grid-column:1/-1}
.result-box .label{font-size:.8rem;font-weight:600;margin-bottom:.3rem}
.result-box.primary .label{opacity:.9;font-size:.85rem}
.result-box .value{font-size:1.4rem;font-weight:800}
.result-box.primary .value{font-size:2rem}
.result-box .sub{font-size:.75rem;margin-top:.2rem;opacity:.7}
.result-box.gain{background:#fff3e0;border:1px solid #ffe0b2}
.result-box.gain .value{color:#e65100}

.chart-container{position:relative;width:100%;margin:1rem auto 0}
.chart-container canvas{width:100%!important;height:auto!important;display:block}
.chart-legend{display:flex;justify-content:center;gap:1.5rem;margin-top:.75rem;font-size:.85rem;flex-wrap:wrap}
.chart-legend span{display:flex;align-items:center;gap:.3rem}
.chart-legend .dot{width:12px;height:12px;border-radius:3px;display:inline-block}

.pie-wrapper{display:flex;align-items:center;justify-content:center;gap:2rem;flex-wrap:wrap;margin-top:1rem}
.pie-chart-box{position:relative;width:200px;height:200px}
.pie-chart-box canvas{width:100%!important;height:100%!important}
.pie-legend{font-size:.9rem;line-height:2}
.pie-legend .dot{display:inline-block;width:14px;height:14px;border-radius:3px;vertical-align:middle;margin-right:.4rem}
.pie-legend .pct{font-weight:700;margin-left:.3rem}

.table-wrap{overflow-x:auto;margin-top:.5rem;border-radius:8px;border:1px solid var(--border)}
.table-wrap table{width:100%;border-collapse:collapse;font-size:.85rem;min-width:500px}
.table-wrap th{background:var(--navy);color:#fff;padding:.6rem .5rem;font-weight:600;white-space:nowrap}
.table-wrap td{padding:.55rem .5rem;border-bottom:1px solid #eee;text-align:right}
.table-wrap tr:nth-child(even){background:#fafafa}
.table-wrap td:first-child{text-align:center;font-weight:600}
.table-wrap .highlight{background:var(--green-pale);font-weight:700}

.cta-box{display:block;text-align:center;padding:1.2rem 1.5rem;border-radius:var(--radius);font-weight:700;font-size:1rem;color:#fff;transition:transform .2s,box-shadow .2s;margin-top:1.5rem}
.cta-box:hover{transform:translateY(-2px);box-shadow:var(--shadow-lg)}
.cta-green{background:linear-gradient(135deg,var(--green),var(--green-light))}
.cta-navy{background:linear-gradient(135deg,var(--navy),var(--navy-light))}
.cta-sub{display:block;font-size:.78rem;font-weight:400;opacity:.85;margin-top:.25rem}

.note{background:#fffde7;border:1px solid #fff9c4;border-radius:8px;padding:1rem 1.2rem;font-size:.82rem;color:#795548;margin-top:1.5rem;line-height:1.6}
.note::before{content:"\26A0\FE0F ";font-size:.9rem}

footer{text-align:center;padding:1.5rem 1rem;font-size:.78rem;color:var(--text-light);border-top:1px solid var(--border);margin-top:2rem;background:#fff}

@media(max-width:600px){
  .header h1{font-size:1.3rem}
  .results-grid{grid-template-columns:1fr 1fr}
  .result-box.primary{grid-column:1/-1}
  .result-box .value{font-size:1.2rem}
  .result-box.primary .value{font-size:1.6rem}
  .slider-row .num-input{width:90px;font-size:.9rem}
  .card{padding:1.2rem}
  .pie-wrapper{gap:1rem}
  .pie-chart-box{width:160px;height:160px}
}
@media(max-width:400px){
  .results-grid{grid-template-columns:1fr}
}
</style>
</head>
<body>

<header class="header">
  <h1>投資リターン計算機</h1>
  <p>複利の力で資産がどう成長するかシミュレーション</p>
</header>

<div class="container">

  <!-- Input Card -->
  <div class="card">
    <div class="card-title">投資条件を入力</div>

    <div class="input-group">
      <div class="input-label"><span>初期投資額</span><span class="unit">万円</span></div>
      <div class="slider-row">
        <input type="range" id="initialSlider" min="0" max="5000" step="10" value="100">
        <input type="number" class="num-input" id="initialInput" min="0" max="5000" step="10" value="100">
      </div>
    </div>

    <div class="input-group">
      <div class="input-label"><span>毎月積立額</span><span class="unit">万円</span></div>
      <div class="slider-row">
        <input type="range" id="monthlySlider" min="0" max="50" step="0.5" value="3">
        <input type="number" class="num-input" id="monthlyInput" min="0" max="50" step="0.5" value="3">
      </div>
    </div>

    <div class="input-group">
      <div class="input-label"><span>想定年利</span><span class="unit">%</span></div>
      <div class="slider-row">
        <input type="range" id="rateSlider" min="0" max="20" step="0.1" value="5">
        <input type="number" class="num-input" id="rateInput" min="0" max="20" step="0.1" value="5">
      </div>
    </div>

    <div class="input-group">
      <div class="input-label"><span>運用期間</span><span class="unit">年</span></div>
      <div class="slider-row">
        <input type="range" id="yearsSlider" min="1" max="40" step="1" value="20">
        <input type="number" class="num-input" id="yearsInput" min="1" max="40" step="1" value="20">
      </div>
    </div>
  </div>

  <!-- Results Card -->
  <div class="card">
    <div class="card-title">計算結果</div>
    <div class="results-grid">
      <div class="result-box primary">
        <div class="label">最終資産額</div>
        <div class="value" id="totalAsset">-</div>
      </div>
      <div class="result-box">
        <div class="label">元本合計</div>
        <div class="value" id="totalPrincipal">-</div>
      </div>
      <div class="result-box gain">
        <div class="label">運用益</div>
        <div class="value" id="totalGain">-</div>
      </div>
      <div class="result-box">
        <div class="label">運用益率</div>
        <div class="value" id="gainRate">-</div>
      </div>
    </div>
  </div>

  <!-- CTA 1 -->
  <a href="https://www.sbisec.co.jp/" class="cta-box cta-green" rel="nofollow noopener" target="_blank">
    ネット証券で積立投資を始める【SBI証券】
    <span class="cta-sub">業界最安水準の手数料 / 新NISA対応 / 最短5分で口座開設</span>
  </a>

  <!-- Line Chart Card -->
  <div class="card">
    <div class="card-title">資産推移グラフ</div>
    <div class="chart-container">
      <canvas id="lineChart" width="900" height="400"></canvas>
    </div>
    <div class="chart-legend">
      <span><span class="dot" style="background:#1a3a5c"></span>元本</span>
      <span><span class="dot" style="background:#2e7d32"></span>資産額</span>
      <span><span class="dot" style="background:rgba(46,125,50,.15)"></span>運用益</span>
    </div>
  </div>

  <!-- Pie Chart Card -->
  <div class="card">
    <div class="card-title">元本 vs 運用益の比率</div>
    <div class="pie-wrapper">
      <div class="pie-chart-box">
        <canvas id="pieChart" width="200" height="200"></canvas>
      </div>
      <div class="pie-legend" id="pieLegend"></div>
    </div>
  </div>

  <!-- Comparison Table Card -->
  <div class="card">
    <div class="card-title">年利別比較表</div>
    <div class="table-wrap">
      <table id="compTable">
        <thead>
          <tr>
            <th>年利</th>
            <th>元本合計</th>
            <th>運用益</th>
            <th>最終資産額</th>
            <th>運用益率</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <!-- CTA 2 -->
  <a href="https://www.sbisec.co.jp/" class="cta-box cta-navy" rel="nofollow noopener" target="_blank">
    資産運用をプロに無料相談【マネードクター】
    <span class="cta-sub">FPに何度でも無料相談OK / オンライン対応 / 最適プランを提案</span>
  </a>

  <!-- Disclaimer -->
  <div class="note">
    この計算は概算です。実際の投資では手数料・税金・為替変動などにより結果が異なります。正確な情報は専門家（ファイナンシャルプランナー等）にご相談ください。投資にはリスクが伴い、元本割れの可能性があります。
  </div>

</div>

<footer>&copy; 2026 投資リターン計算機 All rights reserved.</footer>

<script>
(function(){
  'use strict';

  /* ── Element references ── */
  var ids = ['initial','monthly','rate','years'];
  var sliders = {}, inputs = {};
  ids.forEach(function(id){
    sliders[id] = document.getElementById(id + 'Slider');
    inputs[id]  = document.getElementById(id + 'Input');
  });

  /* ── Sync slider <-> number input ── */
  ids.forEach(function(id){
    sliders[id].addEventListener('input', function(){
      inputs[id].value = this.value;
      calculate();
    });
    inputs[id].addEventListener('input', function(){
      var v = parseFloat(this.value);
      var mn = parseFloat(this.min);
      var mx = parseFloat(this.max);
      if(!isNaN(v)){
        if(v < mn) v = mn;
        if(v > mx) v = mx;
        sliders[id].value = v;
      }
      calculate();
    });
    inputs[id].addEventListener('change', function(){
      var v = parseFloat(this.value);
      var mn = parseFloat(this.min);
      var mx = parseFloat(this.max);
      if(isNaN(v) || v < mn) v = mn;
      if(v > mx) v = mx;
      this.value = v;
      sliders[id].value = v;
      calculate();
    });
  });

  /* ── Calculation Core ── */
  function computeReturns(initialMan, monthlyMan, ratePercent, years){
    var initial  = initialMan * 10000;
    var monthly  = monthlyMan * 10000;
    var r        = ratePercent / 100;
    var monthlyR = r / 12;
    var data     = []; // [{year, principal, asset}]

    var asset = initial;
    var principal = initial;

    data.push({year:0, principal: principal, asset: asset});

    for(var y = 1; y <= years; y++){
      for(var m = 0; m < 12; m++){
        asset = asset * (1 + monthlyR) + monthly;
        principal += monthly;
      }
      data.push({year: y, principal: principal, asset: Math.round(asset)});
    }

    return data;
  }

  function fmt(n){
    if(n >= 100000000){
      return (n / 100000000).toFixed(2).replace(/\.?0+$/,'') + '億円';
    }
    return (n / 10000).toFixed(1).replace(/\.0$/,'') + '万円';
  }

  function fmtFull(n){
    return Math.round(n).toLocaleString('ja-JP') + '円';
  }

  /* ── Main calculate ── */
  function calculate(){
    var initial  = parseFloat(inputs.initial.value) || 0;
    var monthly  = parseFloat(inputs.monthly.value) || 0;
    var rate     = parseFloat(inputs.rate.value)    || 0;
    var years    = parseInt(inputs.years.value)      || 1;

    var data = computeReturns(initial, monthly, rate, years);
    var last = data[data.length - 1];
    var principal = last.principal;
    var asset     = last.asset;
    var gain      = asset - principal;
    var gainPct   = principal > 0 ? (gain / principal * 100) : 0;

    document.getElementById('totalAsset').textContent     = fmt(asset);
    document.getElementById('totalPrincipal').textContent = fmt(principal);
    document.getElementById('totalGain').textContent      = fmt(gain);
    document.getElementById('gainRate').textContent       = (gain >= 0 ? '+' : '') + gainPct.toFixed(1) + '%';

    drawLineChart(data);
    drawPieChart(principal, gain);
    buildCompTable(initial, monthly, years);
  }

  /* ── Line Chart (Canvas) ── */
  var lineCanvas = document.getElementById('lineChart');
  var lineCtx    = lineCanvas.getContext('2d');

  function drawLineChart(data){
    var dpr = window.devicePixelRatio || 1;
    var rect = lineCanvas.parentElement.getBoundingClientRect();
    var W = rect.width;
    var H = Math.min(400, W * 0.5);
    lineCanvas.width  = W * dpr;
    lineCanvas.height = H * dpr;
    lineCanvas.style.width  = W + 'px';
    lineCanvas.style.height = H + 'px';
    lineCtx.setTransform(dpr, 0, 0, dpr, 0, 0);

    var ctx = lineCtx;
    ctx.clearRect(0, 0, W, H);

    var padL = 70, padR = 20, padT = 20, padB = 40;
    var cW = W - padL - padR;
    var cH = H - padT - padB;
    var n  = data.length;

    var maxVal = 0;
    data.forEach(function(d){ if(d.asset > maxVal) maxVal = d.asset; if(d.principal > maxVal) maxVal = d.principal; });
    if(maxVal === 0) maxVal = 10000;

    // Nice scale
    var step = niceStep(maxVal, 5);
    var yMax = Math.ceil(maxVal / step) * step;

    function xPos(i){ return padL + (i / (n - 1)) * cW; }
    function yPos(v){ return padT + cH - (v / yMax) * cH; }

    // Grid & Y labels
    ctx.strokeStyle = '#eee';
    ctx.lineWidth = 1;
    ctx.fillStyle = '#999';
    ctx.font = '11px sans-serif';
    ctx.textAlign = 'right';
    ctx.textBaseline = 'middle';
    for(var g = 0; g <= yMax; g += step){
      var gy = yPos(g);
      ctx.beginPath(); ctx.moveTo(padL, gy); ctx.lineTo(W - padR, gy); ctx.stroke();
      ctx.fillText(fmtShort(g), padL - 8, gy);
    }

    // X labels
    ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    var xStep = n <= 10 ? 1 : n <= 20 ? 2 : 5;
    for(var xi = 0; xi < n; xi += xStep){
      ctx.fillText(data[xi].year + '年', xPos(xi), padT + cH + 8);
    }
    // Always show last
    if((n - 1) % xStep !== 0){
      ctx.fillText(data[n-1].year + '年', xPos(n-1), padT + cH + 8);
    }

    // Fill area between asset and principal
    ctx.beginPath();
    for(var i = 0; i < n; i++){
      var px = xPos(i);
      if(i === 0) ctx.moveTo(px, yPos(data[i].asset));
      else ctx.lineTo(px, yPos(data[i].asset));
    }
    for(var i = n - 1; i >= 0; i--){
      ctx.lineTo(xPos(i), yPos(data[i].principal));
    }
    ctx.closePath();
    ctx.fillStyle = 'rgba(46,125,50,.12)';
    ctx.fill();

    // Principal line
    ctx.beginPath();
    ctx.strokeStyle = '#1a3a5c';
    ctx.lineWidth = 2.5;
    for(var i = 0; i < n; i++){
      var px = xPos(i);
      if(i === 0) ctx.moveTo(px, yPos(data[i].principal));
      else ctx.lineTo(px, yPos(data[i].principal));
    }
    ctx.stroke();

    // Asset line
    ctx.beginPath();
    ctx.strokeStyle = '#2e7d32';
    ctx.lineWidth = 2.5;
    for(var i = 0; i < n; i++){
      var px = xPos(i);
      if(i === 0) ctx.moveTo(px, yPos(data[i].asset));
      else ctx.lineTo(px, yPos(data[i].asset));
    }
    ctx.stroke();

    // Dots on last point
    [[data[n-1].principal, '#1a3a5c'], [data[n-1].asset, '#2e7d32']].forEach(function(pair){
      ctx.beginPath();
      ctx.arc(xPos(n-1), yPos(pair[0]), 5, 0, Math.PI * 2);
      ctx.fillStyle = pair[1];
      ctx.fill();
      ctx.strokeStyle = '#fff';
      ctx.lineWidth = 2;
      ctx.stroke();
    });
  }

  function niceStep(max, targetSteps){
    var rough = max / targetSteps;
    var mag = Math.pow(10, Math.floor(Math.log10(rough)));
    var norm = rough / mag;
    var step;
    if(norm <= 1.5) step = 1;
    else if(norm <= 3.5) step = 2;
    else if(norm <= 7.5) step = 5;
    else step = 10;
    return step * mag;
  }

  function fmtShort(n){
    if(n >= 100000000) return (n / 100000000).toFixed(1).replace(/\.0$/,'') + '億';
    if(n >= 10000) return (n / 10000).toFixed(0) + '万';
    return n.toLocaleString();
  }

  /* ── Pie Chart (Canvas) ── */
  var pieCanvas = document.getElementById('pieChart');
  var pieCtx    = pieCanvas.getContext('2d');

  function drawPieChart(principal, gain){
    var dpr = window.devicePixelRatio || 1;
    var box = pieCanvas.parentElement.getBoundingClientRect();
    var S = Math.min(box.width, box.height);
    pieCanvas.width  = S * dpr;
    pieCanvas.height = S * dpr;
    pieCanvas.style.width  = S + 'px';
    pieCanvas.style.height = S + 'px';
    pieCtx.setTransform(dpr, 0, 0, dpr, 0, 0);

    var ctx = pieCtx;
    ctx.clearRect(0, 0, S, S);
    var cx = S / 2, cy = S / 2, r = S / 2 - 10;
    var total = principal + Math.max(gain, 0);
    if(total <= 0){ total = 1; principal = 1; gain = 0; }

    var slices = [
      {val: principal, color: '#1a3a5c', label: '元本'},
      {val: Math.max(gain, 0), color: '#2e7d32', label: '運用益'}
    ];

    var startAngle = -Math.PI / 2;
    slices.forEach(function(s){
      var angle = (s.val / total) * Math.PI * 2;
      ctx.beginPath();
      ctx.moveTo(cx, cy);
      ctx.arc(cx, cy, r, startAngle, startAngle + angle);
      ctx.closePath();
      ctx.fillStyle = s.color;
      ctx.fill();
      startAngle += angle;
    });

    // Inner circle for donut
    ctx.beginPath();
    ctx.arc(cx, cy, r * 0.55, 0, Math.PI * 2);
    ctx.fillStyle = '#fff';
    ctx.fill();

    // Center text
    ctx.fillStyle = '#333';
    ctx.font = 'bold ' + (S * 0.09) + 'px sans-serif';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    var pct = total > 0 ? ((Math.max(gain,0) / total) * 100).toFixed(1) : '0.0';
    ctx.fillText('運用益', cx, cy - S * 0.06);
    ctx.fillText(pct + '%', cx, cy + S * 0.06);

    // Legend
    var pPct = (principal / total * 100).toFixed(1);
    var gPct = (Math.max(gain,0) / total * 100).toFixed(1);
    document.getElementById('pieLegend').innerHTML =
      '<div><span class="dot" style="background:#1a3a5c"></span>元本 ' + fmt(principal) + '<span class="pct">' + pPct + '%</span></div>' +
      '<div><span class="dot" style="background:#2e7d32"></span>運用益 ' + fmt(Math.max(gain,0)) + '<span class="pct">' + gPct + '%</span></div>';
  }

  /* ── Comparison Table ── */
  function buildCompTable(initial, monthly, years){
    var rates = [3, 5, 7, 10];
    var userRate = parseFloat(inputs.rate.value) || 0;
    // Include user rate if not already in list
    var allRates = rates.slice();
    var userInList = false;
    for(var ri = 0; ri < rates.length; ri++){
      if(Math.abs(rates[ri] - userRate) < 0.01){ userInList = true; break; }
    }
    if(!userInList && userRate > 0){
      allRates.push(userRate);
      allRates.sort(function(a,b){ return a - b; });
    }

    var tbody = document.querySelector('#compTable tbody');
    var html = '';
    allRates.forEach(function(r){
      var d = computeReturns(initial, monthly, r, years);
      var last = d[d.length - 1];
      var p = last.principal;
      var a = last.asset;
      var g = a - p;
      var gp = p > 0 ? (g / p * 100).toFixed(1) : '0.0';
      var isUser = Math.abs(r - userRate) < 0.01;
      var cls = isUser ? ' class="highlight"' : '';
      html += '<tr' + cls + '>' +
        '<td>' + r.toFixed(1) + '%' + (isUser ? ' *' : '') + '</td>' +
        '<td>' + fmt(p) + '</td>' +
        '<td>' + fmt(g) + '</td>' +
        '<td>' + fmt(a) + '</td>' +
        '<td>' + (g >= 0 ? '+' : '') + gp + '%</td>' +
        '</tr>';
    });
    tbody.innerHTML = html;
  }

  /* ── Resize handling ── */
  var resizeTimer;
  window.addEventListener('resize', function(){
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(calculate, 150);
  });

  /* ── Initial calculation ── */
  calculate();

})();
</script>
</body>
</html>